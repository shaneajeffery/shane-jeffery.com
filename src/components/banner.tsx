import config from '@/config/site.config.json';

import Markdown from './react-markdown';
import style from '@/styles/modules/Banner.module.scss';

import { useEffect, useRef, useState } from 'react';

const Banner = ({ banner }) => {
    const { first_name, last_name, bg_text, description, image } = banner;

    const [isLoading, setLoading] = useState(true);
    useEffect(() => {
        setLoading(false);
    }, []);

    // Banner BG Text
    const bannerBgText = config.settings.bannerBgText;

    const textEl = useRef();
    useEffect(() => {
        const handleBannerScroll = () => {
            if (textEl.current !== null) {
                const scrollValue = window.scrollY;
                textEl.current.style.opacity = (1000 - scrollValue) / 1000;
                textEl.current.style.transform = `translateX(-${scrollValue}px)`;
            }
        };
        window.addEventListener('scroll', handleBannerScroll);
    }, [textEl]);

    return (
        <section className={`banner ${style.banner}`}>
            <div className={style['bg-text']} ref={textEl}>
                {bannerBgText && (
                    <div data-aos="fade-in">
                        <span>{bg_text}</span>
                    </div>
                )}
            </div>

            <div className="container h-full">
                <div className="row h-full items-center">
                    <div className={`col-12 text-center`}>
                        <div className="relative mx-auto mb-6 inline-block md:hidden">
                            <div className="mx-5 overflow-hidden rounded-full bg-[#E3DFDC]">
                                <Image
                                    className="mx-auto"
                                    src={image}
                                    alt={first_name + last_name}
                                    height={150}
                                    width={150}
                                    data-aos="slide-up"
                                    data-aos-duration="500"
                                    data-aos-delay="150"
                                />
                            </div>
                            <svg
                                className={`absolute right-[10px] top-[-0px] transition delay-300 duration-1000 ${
                                    isLoading
                                        ? 'rotate-[360deg] scale-0'
                                        : 'rorate-0 scale-100'
                                }`}
                                width="51"
                                height="52"
                                viewBox="0 0 51 52"
                                fill="none"
                                xmlns="http://www.w3.org/2000/svg"
                            >
                                <path
                                    d="M21.7856 25.3396C21.8855 25.0011 21.9855 24.6907 22.0712 24.3804C22.4853 22.7864 22.8852 21.1925 23.4279 19.6267C24.4132 16.7914 25.5557 14.0125 26.7268 11.2477C28.0263 8.1867 29.2973 5.12569 30.5826 2.06469C30.7825 1.57098 31.0253 1.10548 31.2681 0.625872C31.3538 0.442494 31.4823 0.273222 31.6251 0.132161C31.8679 -0.107641 32.1821 -0.00889879 32.2106 0.329646C32.2392 0.611766 32.2392 0.893887 32.1821 1.17601C31.9679 2.37502 31.7536 3.57403 31.4966 4.75894C30.8111 7.98921 30.1113 11.2195 29.5687 14.478C29.2545 16.3964 28.9831 18.3148 28.7118 20.2332C28.469 21.926 28.2691 23.6046 28.0549 25.2973C28.0263 25.5512 28.012 25.8051 27.9835 26.1296C28.1263 26.0449 28.1977 26.0026 28.2691 25.9462C28.5547 25.6923 28.8546 25.4384 29.1117 25.1562C31.8822 22.3068 35.0097 19.8665 38.3086 17.6377C38.5085 17.5108 38.7085 17.3838 38.9227 17.271C39.0369 17.2146 39.1655 17.1863 39.2797 17.1722C39.5082 17.1581 39.6796 17.3133 39.6796 17.539C39.6796 17.7083 39.651 17.9057 39.5653 18.0609C39.3654 18.47 39.1655 18.8791 38.9084 19.2458C38.0515 20.4307 37.1947 21.6156 36.3093 22.7723C34.9811 24.5074 33.6245 26.2283 32.282 27.9633C32.025 28.2878 31.7965 28.6404 31.5823 29.0072C31.2681 29.5291 31.3252 29.783 31.8536 30.1075C32.2535 30.3473 32.6676 30.5588 33.0961 30.7422C34.6384 31.3911 36.2379 31.8989 37.8373 32.3785C41.9074 33.6199 45.9346 34.9881 49.8762 36.5821C50.1189 36.6809 50.376 36.7655 50.6188 36.8642C50.7187 36.9066 50.8044 36.9489 50.8901 37.0194C51.0757 37.1887 51.0186 37.4849 50.7759 37.5695C50.6902 37.5978 50.5902 37.6119 50.5045 37.6119C49.5477 37.626 48.5909 37.6542 47.634 37.626C45.2063 37.5272 42.7785 37.2733 40.3651 36.9771C36.8234 36.5539 33.3103 35.9756 29.8257 35.2562C29.3545 35.1574 28.8832 35.0869 28.4119 35.0022C28.3119 34.9881 28.212 34.974 28.0977 34.9881C27.7264 34.9881 27.5693 35.0728 27.4694 35.4395C27.3408 35.9332 27.2266 36.427 27.1409 36.9207C26.7553 39.0507 26.4411 41.1948 26.1984 43.353C26.0413 44.7495 25.927 46.1601 25.7557 47.5566C25.6271 48.6569 25.4415 49.743 25.2844 50.8433C25.2415 51.0831 25.1559 51.3229 25.0702 51.5486C24.9845 51.7884 24.8274 52 24.5275 52C24.2562 51.9859 24.0991 51.7884 24.0277 51.5486C23.8991 51.1677 23.7706 50.7728 23.7135 50.3778C23.5707 49.4327 23.4279 48.4735 23.3707 47.5284C23.2279 45.215 23.1137 42.9157 23.0423 40.6023C22.9994 39.2058 23.0423 37.8093 23.0566 36.4128C23.0566 36.2859 23.0566 36.1448 23.0566 35.9615C22.8423 35.9897 22.6567 35.9897 22.471 36.0179C20.4146 36.3564 18.401 36.8219 16.3731 37.3015C12.9171 38.0915 9.46111 38.9519 5.96228 39.6431C4.47706 39.9394 2.97757 40.1933 1.47807 40.4613C1.22101 40.5036 0.949674 40.5177 0.692618 40.5459C0.621213 40.5459 0.549808 40.56 0.492684 40.5459C0.192785 40.5318 0.0356946 40.4472 0.00713275 40.2638C-0.03571 40.024 0.12138 39.9111 0.292751 39.8124C0.678337 39.6008 1.04964 39.4033 1.43523 39.2058C5.07686 37.3015 8.80419 35.5665 12.5029 33.7891C14.2309 32.9569 15.9304 32.04 17.6298 31.1513C17.844 31.0385 18.0297 30.9115 18.2867 30.7563C18.1582 30.5871 18.0582 30.4178 17.9297 30.2908C17.2157 29.5291 16.5302 28.7392 15.759 28.0339C14.2167 26.6233 12.6458 25.255 11.0606 23.8867C9.13265 22.2222 7.23329 20.5295 5.49101 18.6816C5.10543 18.2725 4.73412 17.8352 4.3771 17.3979C4.27713 17.2851 4.19145 17.144 4.10576 17.003C3.99151 16.8055 4.00579 16.6221 4.13432 16.4951C4.24857 16.3682 4.43422 16.3541 4.63416 16.4528C4.70556 16.481 4.77696 16.5375 4.84837 16.5657C5.80519 17.1017 6.73345 17.6659 7.70456 18.1738C10.5893 19.669 13.4883 21.1642 16.316 22.7864C17.6726 23.5623 19.0865 24.2111 20.5717 24.7331C20.8002 24.8177 21.0001 24.9305 21.2143 25.0434C21.4 25.128 21.5713 25.2268 21.7856 25.3396Z"
                                    fill="#ff9800"
                                />
                            </svg>
                        </div>
                        <h1
                            className={`${style.name} font-secondary flex-wrap items-center justify-center md:flex`}
                            data-aos="fade-up-sm"
                        >
                            <span className="mx-2 inline-block md:mx-0">
                                <Markdown content={first_name} inline={true} />
                            </span>
                            <div className="relative my-4 hidden md:my-0 md:block">
                                <div className="mx-5 overflow-hidden rounded-full bg-[#E3DFDC]">
                                    <Image
                                        className="mx-auto"
                                        src={image}
                                        alt={first_name + last_name}
                                        height={150}
                                        width={150}
                                        data-aos="slide-up"
                                        data-aos-duration="500"
                                        data-aos-delay="150"
                                    />
                                </div>
                                <svg
                                    className={`absolute right-[10px] top-[-0px] transition delay-300 duration-1000 ${
                                        isLoading
                                            ? 'rotate-[360deg] scale-0'
                                            : 'rorate-0 scale-100'
                                    }`}
                                    width="51"
                                    height="52"
                                    viewBox="0 0 51 52"
                                    fill="none"
                                    xmlns="http://www.w3.org/2000/svg"
                                >
                                    <path
                                        d="M21.7856 25.3396C21.8855 25.0011 21.9855 24.6907 22.0712 24.3804C22.4853 22.7864 22.8852 21.1925 23.4279 19.6267C24.4132 16.7914 25.5557 14.0125 26.7268 11.2477C28.0263 8.1867 29.2973 5.12569 30.5826 2.06469C30.7825 1.57098 31.0253 1.10548 31.2681 0.625872C31.3538 0.442494 31.4823 0.273222 31.6251 0.132161C31.8679 -0.107641 32.1821 -0.00889879 32.2106 0.329646C32.2392 0.611766 32.2392 0.893887 32.1821 1.17601C31.9679 2.37502 31.7536 3.57403 31.4966 4.75894C30.8111 7.98921 30.1113 11.2195 29.5687 14.478C29.2545 16.3964 28.9831 18.3148 28.7118 20.2332C28.469 21.926 28.2691 23.6046 28.0549 25.2973C28.0263 25.5512 28.012 25.8051 27.9835 26.1296C28.1263 26.0449 28.1977 26.0026 28.2691 25.9462C28.5547 25.6923 28.8546 25.4384 29.1117 25.1562C31.8822 22.3068 35.0097 19.8665 38.3086 17.6377C38.5085 17.5108 38.7085 17.3838 38.9227 17.271C39.0369 17.2146 39.1655 17.1863 39.2797 17.1722C39.5082 17.1581 39.6796 17.3133 39.6796 17.539C39.6796 17.7083 39.651 17.9057 39.5653 18.0609C39.3654 18.47 39.1655 18.8791 38.9084 19.2458C38.0515 20.4307 37.1947 21.6156 36.3093 22.7723C34.9811 24.5074 33.6245 26.2283 32.282 27.9633C32.025 28.2878 31.7965 28.6404 31.5823 29.0072C31.2681 29.5291 31.3252 29.783 31.8536 30.1075C32.2535 30.3473 32.6676 30.5588 33.0961 30.7422C34.6384 31.3911 36.2379 31.8989 37.8373 32.3785C41.9074 33.6199 45.9346 34.9881 49.8762 36.5821C50.1189 36.6809 50.376 36.7655 50.6188 36.8642C50.7187 36.9066 50.8044 36.9489 50.8901 37.0194C51.0757 37.1887 51.0186 37.4849 50.7759 37.5695C50.6902 37.5978 50.5902 37.6119 50.5045 37.6119C49.5477 37.626 48.5909 37.6542 47.634 37.626C45.2063 37.5272 42.7785 37.2733 40.3651 36.9771C36.8234 36.5539 33.3103 35.9756 29.8257 35.2562C29.3545 35.1574 28.8832 35.0869 28.4119 35.0022C28.3119 34.9881 28.212 34.974 28.0977 34.9881C27.7264 34.9881 27.5693 35.0728 27.4694 35.4395C27.3408 35.9332 27.2266 36.427 27.1409 36.9207C26.7553 39.0507 26.4411 41.1948 26.1984 43.353C26.0413 44.7495 25.927 46.1601 25.7557 47.5566C25.6271 48.6569 25.4415 49.743 25.2844 50.8433C25.2415 51.0831 25.1559 51.3229 25.0702 51.5486C24.9845 51.7884 24.8274 52 24.5275 52C24.2562 51.9859 24.0991 51.7884 24.0277 51.5486C23.8991 51.1677 23.7706 50.7728 23.7135 50.3778C23.5707 49.4327 23.4279 48.4735 23.3707 47.5284C23.2279 45.215 23.1137 42.9157 23.0423 40.6023C22.9994 39.2058 23.0423 37.8093 23.0566 36.4128C23.0566 36.2859 23.0566 36.1448 23.0566 35.9615C22.8423 35.9897 22.6567 35.9897 22.471 36.0179C20.4146 36.3564 18.401 36.8219 16.3731 37.3015C12.9171 38.0915 9.46111 38.9519 5.96228 39.6431C4.47706 39.9394 2.97757 40.1933 1.47807 40.4613C1.22101 40.5036 0.949674 40.5177 0.692618 40.5459C0.621213 40.5459 0.549808 40.56 0.492684 40.5459C0.192785 40.5318 0.0356946 40.4472 0.00713275 40.2638C-0.03571 40.024 0.12138 39.9111 0.292751 39.8124C0.678337 39.6008 1.04964 39.4033 1.43523 39.2058C5.07686 37.3015 8.80419 35.5665 12.5029 33.7891C14.2309 32.9569 15.9304 32.04 17.6298 31.1513C17.844 31.0385 18.0297 30.9115 18.2867 30.7563C18.1582 30.5871 18.0582 30.4178 17.9297 30.2908C17.2157 29.5291 16.5302 28.7392 15.759 28.0339C14.2167 26.6233 12.6458 25.255 11.0606 23.8867C9.13265 22.2222 7.23329 20.5295 5.49101 18.6816C5.10543 18.2725 4.73412 17.8352 4.3771 17.3979C4.27713 17.2851 4.19145 17.144 4.10576 17.003C3.99151 16.8055 4.00579 16.6221 4.13432 16.4951C4.24857 16.3682 4.43422 16.3541 4.63416 16.4528C4.70556 16.481 4.77696 16.5375 4.84837 16.5657C5.80519 17.1017 6.73345 17.6659 7.70456 18.1738C10.5893 19.669 13.4883 21.1642 16.316 22.7864C17.6726 23.5623 19.0865 24.2111 20.5717 24.7331C20.8002 24.8177 21.0001 24.9305 21.2143 25.0434C21.4 25.128 21.5713 25.2268 21.7856 25.3396Z"
                                        fill="#ff9800"
                                    />
                                </svg>
                            </div>
                            <span className="mx-2 inline-block md:mx-0">
                                <Markdown content={last_name} inline={true} />
                            </span>
                        </h1>
                        <div
                            className="mx-auto mt-5 font-light opacity-80 md:mt-8 md:max-w-xl md:text-xl"
                            data-aos="fade-up-sm"
                            data-aos-delay="100"
                        >
                            <Markdown content={description} inline={true} />
                        </div>
                    </div>
                </div>
            </div>
        </section>
    );
};

export default Banner;
